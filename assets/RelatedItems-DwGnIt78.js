import{r as o,j as t}from"./react-vendor-DmEpS5Kz.js";import{f as p,g as x}from"./services-data-rxdqLngZ.js";import{g}from"./internalUrl-DfDVcRif.js";import{c as u}from"./index-lgBfnuzz.js";import"./vendor-dPMYpV4t.js";import"./opencc-C1Qz6KEM.js";import"./teamcraft-data-u2h6--oi.js";import"./axios-B9ygI19o.js";function k({itemId:n,onItemClick:f}){const[r,i]=o.useState([]),[d,a]=o.useState([]),[l,c]=o.useState(!1);return o.useEffect(()=>{if(!n){i([]),a([]);return}c(!0),p(n).then(e=>{i(e),c(!1)}).catch(e=>{console.error("Failed to find related items:",e),i([]),c(!1)})},[n]),o.useEffect(()=>{if(r.length===0){a([]);return}Promise.all(r.map(async e=>{try{const s=await x(e);return s?{id:e,name:s.name}:null}catch(s){return console.error(`Failed to load item ${e}:`,s),null}})).then(e=>{a(e.filter(s=>s!==null))}).catch(e=>{console.error("Failed to load related items:",e),a([])})},[r]),o.useEffect(()=>{},[l,r.length]),!l&&r.length===0?null:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/60 via-purple-900/20 to-slate-800/60 backdrop-blur-sm rounded-lg border border-purple-500/20 p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-ffxiv-gold flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"相關物品"]}),!l&&r.length>0&&t.jsxs("span",{className:"text-xs text-gray-400 bg-purple-900/40 px-2 py-1 rounded border border-purple-500/30",children:[r.length," 個"]})]})}),l&&t.jsxs("div",{className:"text-center py-4 text-gray-400",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-ffxiv-gold mx-auto mb-2"}),t.jsx("span",{className:"text-sm",children:"載入中..."})]}),!l&&d.length>0&&t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map(e=>t.jsxs("button",{onClick:s=>{s.preventDefault();const m=`${window.location.origin}${g(`/item/${e.id}`)}`;window.open(m,"_blank","noopener,noreferrer")},className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-slate-800/60 border border-purple-500/30 hover:border-ffxiv-gold/60 hover:bg-slate-700/70 transition-all duration-200 group",children:[t.jsx(u,{itemId:e.id,alt:e.name,className:"w-12 h-12 object-contain rounded border border-purple-500/30 group-hover:border-ffxiv-gold/60 transition-colors duration-200"}),t.jsx("span",{className:"text-xs text-gray-300 group-hover:text-ffxiv-gold text-center line-clamp-2 transition-colors duration-200",title:e.name,children:e.name})]},e.id))}),!l&&d.length===0&&r.length>0&&t.jsx("div",{className:"text-center py-4 text-gray-400 text-sm",children:"載入物品資訊中..."})]})}export{k as default};
